+++
title = "Database"
author = ["Hrishikesh Barman"]
draft = false
+++

tags
: [SQL]({{< relref "20230217190123-sql.md" >}}), [Distributed Systems]({{< relref "20221102130004-distributed_systems.md" >}}), [PostgreSQL]({{< relref "20221102123302-postgresql.md" >}})


## Relational Model basics {#relational-model-basics}


### Components {#components}

-   tables = relations
    -   Unordered set that contain the relationship of attributes that represent entities.
    -   Table w `n-ary relation` = Table w n columns
-   attributes = columns (has a type/domain)
-   tuple = row = set of attributes/columns
-   Values
    -   Normally atomic/scalar
    -   `NULL` is a member of every domain if allowed


### Keys {#keys}


#### Primary {#primary}

-   primary key uniquely identifies a single tuple. Some DBMS automatically create primary key.


#### Foreign {#foreign}

-   one-one
-   one-many : we can have an external table


### Data model &amp; Schema {#data-model-and-schema}

-   A schema is a description of a particular collection of data, using a given data model.
-   A data model is a collection of concepts for describing the data in a database.
    -   Eg. Relational, K/V, Graph, Document/Object, Column-family, Array/Matrix/Vectors etc.


#### Relational {#relational}

-   Usually OLTP
-   [PostgreSQL]({{< relref "20221102123302-postgresql.md" >}}), MySQL etc
-   Optimized for storing rows of data


#### Document/Object based {#document-object-based}

-   MongoDB, DocumentDB etc.


#### K/V {#k-v}

-   Redis
-   DynamoDB(NoSQL)


#### Column-family {#column-family}

-   Usually OLAP
-   Optimized for fast retrieval of columns of data
-   AWS Redshift, [DuckDB](https://news.ycombinator.com/item?id=34741195), Cassandra, Clickhouse, HBase(NoSQL)


#### <span class="org-todo todo TODO">TODO</span> Questions {#questions}

-   I am consued about nosql and columnar dbs. come back later.


## Normalization {#normalization}


## Partitioning {#partitioning}

-   See [Scaling Databases]({{< relref "20230608143206-scaling_databases.md" >}})
-   A rather general concept and can be applied in many contexts.
-   Partitioning could be
    -   Different database inside MySQL on the same server
    -   Different tables
    -   Different column value in a singular table


### Horizontal/Row based {#horizontal-row-based}

![](/ox-hugo/20230608143206-scaling_databases-673884427.png)
![](/ox-hugo/20230608143206-scaling_databases-1571241611.png)

-   Splitting one table into different tables. Same table structure.


### Vertical/Column based {#vertical-column-based}

-   Splitting one table into different tables. Each table will have a different table structure.
-   This is similar to the idea of **Normalization**
    -   Usually vertical partitioning refers to a physical optimization
    -   Whereas normalization is an optimization on the conceptual level


## on ORMs {#on-orms}

-   ORMs are made for OLTP workloads, not OLAPs
-   [Is ORM still an 'anti pattern'? · getlago/lago Wiki · GitHub](https://github.com/getlago/lago/wiki/Is-ORM-still-an-%27anti-pattern%27%3F)


## ACID {#acid}


### Atomicity {#atomicity}


### Isolation {#isolation}


### Durability {#durability}


### Consistency {#consistency}

-   Understanding Atomicity and Isolation important before understanding Consistency
-   Some sacrifice durability for performance.
-   Durability: When i hit save, things should go to non-volatile shit, so that if system crashes, i can still read the data
