+++
title = "PostgreSQL"
author = ["Hrishikesh Barman"]
draft = false
+++

tags
: [Database]({{< relref "20221102123145-database.md" >}})


## Snippets {#snippets}

```shell
\db # List all tablespaces
\l # List all dbs
\c <db_name> # Connect to a db
\dn # List all schemas
\dt *.* # List all relations inside that schema.
\dt <schema_name>.* # Column representation of the data types and indexes of a database
\d+ <schema_name>.<table_name> # Column representation of the data types and indexes of a database
```

SQL

```sql
SELECT * from <schema_name>.<table_name>; /* Simple SELECT */
```


## Relevant Notes {#relevant-notes}

-   **Initializing a postgres directory:** After logging into the `postgres` user, you can create a directory with necessary postgres files with the `initdb` command. It creates a directory in the file system and then you can start a postgres server directing it to that directory.
-   **Tablespaces:** All tables are by default created in `pg_default` tablespace, creating in a tablespace does not affect the logical SQL schema.
-   **public schema:** All databases will have a public schema created by the `postgres` user. By default `\d` will be showing relations from the public schema.


## Deadlocks {#deadlocks}

-   <https://www.reddit.com/r/PostgreSQL/comments/20zh95/deadlock_in_etl_process_what_do_i_do_wrong/>
-   <https://www.reddit.com/r/PostgreSQL/comments/116glmd/help_with_deadlocks/>
-   <https://www.reddit.com/r/PostgreSQL/comments/64pzph/i_am_getting_sharelock_deadlocks_what_do_i_do/>
-   <https://www.reddit.com/r/rails/comments/zqms8x/how_to_monitor_and_fix_postgresql_database_locks/>
-   <https://pawelurbanek.com/rails-postgresql-locks>
-   <https://www.reddit.com/r/PostgreSQL/comments/lt3ho3/does_deadlock_occur_on_single_function_accessing/>
-   <https://www.reddit.com/r/PostgreSQL/comments/kit0g3/stop_worrying_about_postgresql_locks_in_your/>


## Additional Extension news {#additional-extension-news}

-   [Pg_jsonschema â€“ JSON Schema Support for Postgres | Hacker News](https://news.ycombinator.com/item?id=35258323)
-   [pgvector: Embeddings and vector similarity | Supabase Docs](https://supabase.com/docs/guides/database/extensions/pgvector)


## Links {#links}

-   [Types of Indexes in PostgreSQL](https://www.highgo.ca/2020/06/22/types-of-indexes-in-postgresql/)
-   [Explain Guide](https://www.pgmustard.com/docs/explain)
-   <https://github.com/allaboutapps/integresql>
-   [Five Tips For a Healthier Postgres Database in the New Year](https://www.crunchydata.com/blog/five-tips-for-a-healthier-postgres-database-in-the-new-year)
-   [Postgres WAL Files and Sequence Numbers](https://www.crunchydata.com/blog/postgres-wal-files-and-sequuence-numbers)
